generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Category {
  category_id     Int @id @default(autoincrement())
  category_name   String @unique
  Product         Product[]
}

model Brand {
  brand_id        Int @id @default(autoincrement())
  brand_name      String @unique
  Product         Product[]
}

model Product {
  product_id      Int @id @default(autoincrement())
  product_code    String @unique
  product_type    String @unique
  category_id     Int
  brand_id        Int
  unit            String?
  purchase_price  Float?
  selling_price   Float?
  description     String?
  created_at      DateTime @default(now())
  updated_at      DateTime @updatedAt
  category        Category @relation(fields: [category_id], references: [category_id])
  brand           Brand @relation(fields: [brand_id], references: [brand_id])
  stock           Stock[]
  inventory       Transaction[]
}

model Stock {
  stock_id        Int @id @default(autoincrement())
  product_id      Int
  stock           Int
  serial_number   String?
  created_at      DateTime @default(now())
  updated_at      DateTime @updatedAt
  product         Product @relation(fields: [product_id], references: [product_id])
}

enum TransactionType {
  IN
  OUT
}

model Transaction {
  transaction_id  Int       @id @default(autoincrement())
  product_id      Int
  serial_number   String?
  quantity        Int
  transaction_type TransactionType
  created_at      DateTime  @default(now())
  product         Product   @relation(fields: [product_id], references: [product_id])
}
